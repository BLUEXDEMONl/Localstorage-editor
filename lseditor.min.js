(function(){if(window.lsEditorInst)return;window.lsEditorInst=!0;const C=(e,n=document)=>(n||document).querySelector(e),t=(e,n={},...a)=>{const l=document.createElement(e);return Object.assign(l,n),a.forEach(o=>l.appendChild(typeof o=="string"?document.createTextNode(o):o)),l},f=t("button",{id:"ls-glass-btn",title:"Edit localStorage",style:`
      position:fixed; bottom:24px; right:24px; z-index:2147483647;
      width:60px; height:60px; border:none; border-radius:50%;
      background:rgba(255,255,255,.30);
      backdrop-filter:blur(24px) saturate(180%);
      -webkit-backdrop-filter:blur(24px) saturate(180%);
      box-shadow:
        0 4px 20px rgba(0,0,0,.20),
        inset 0 1px 2px rgba(255,255,255,.40),
        inset 0 -1px 2px rgba(0,0,0,.10);
      cursor:pointer; transition:transform .15s;
    `,innerHTML:`
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L2 7v10l10 5 10-5V7l-10-5zM12 4.09L19.91 8 12 11.91 4.09 8 12 4.09z"
              fill="rgba(0,0,0,.65)"/>
        <path d="M2 8l10 5 10-5M2 12l10 5 10-5M2 16l10 5 10-5"
              stroke="rgba(0,0,0,.65)" stroke-width="1.5" stroke-linecap="round"/>
      </svg>`});document.body.appendChild(f);const r=t("div",{id:"ls-panel",style:`
      position:fixed; top:10px; right:10px; width:320px; max-height:90vh;
      background:#fff; border:1px solid #999; border-radius:8px; padding:8px;
      font-family:sans-serif; font-size:13px; z-index:10000;
      display:flex; flex-direction:column;
      transition:transform .25s ease, opacity .25s ease;
      transform:scale(0); opacity:0; transform-origin:top right;
    `});document.documentElement.appendChild(r);const u=t("div",{textContent:"localStorage editor",style:"font-weight:bold;margin-bottom:6px;"}),b=t("button",{textContent:"\u2715",style:"float:right;border:none;background:transparent;"});u.appendChild(b);const d=t("div",{style:"overflow-y:auto;flex:1;"}),y=t("div",{style:"display:flex;gap:4px;margin-top:6px;"}),p=t("input",{placeholder:"key",style:"flex:1;"}),g=t("input",{placeholder:"value",style:"flex:2;"}),h=t("button",{textContent:"Add"});y.append(p,g,h);const m=t("div",{style:"display:flex;gap:4px;margin-top:6px;"}),w=t("button",{textContent:"Download JSON"}),k=t("button",{textContent:"Upload JSON"}),x=t("input",{type:"file",accept:".json",style:"display:none;"});m.append(w,k,x),r.append(u,d,y,m);const i=e=>e.startsWith("eruda"),s=()=>{d.innerHTML="";for(let e=0;e<localStorage.length;e++){const n=localStorage.key(e);if(i(n))continue;const a=t("div",{style:"display:flex;align-items:center;margin:2px 0;"}),l=t("span",{textContent:n,style:"min-width:100px;word-break:break-all;"}),o=t("input",{value:localStorage.getItem(n),style:"flex:1;margin:0 4px;"}),S=t("button",{textContent:"\u{1F5D1}",title:"Delete"});o.addEventListener("input",()=>localStorage.setItem(n,o.value)),S.onclick=()=>{localStorage.removeItem(n),s()},a.append(l,o,S),d.appendChild(a)}};let c=!1;const v=()=>{c=!c,r.style.transform=c?"scale(1)":"scale(0)",r.style.opacity=c?"1":"0"};f.onclick=v,b.onclick=v,h.onclick=()=>{const e=p.value.trim();!e||i(e)||(localStorage.setItem(e,g.value),p.value=g.value="",s())},w.onclick=()=>{const e={};for(let l=0;l<localStorage.length;l++){const o=localStorage.key(l);i(o)||(e[o]=localStorage.getItem(o))}const n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});t("a",{href:URL.createObjectURL(n),download:"localStorage.json"}).click()},k.onclick=()=>x.click(),x.onchange=e=>{const n=e.target.files[0];if(!n)return;const a=new FileReader;a.onload=()=>{try{const l=JSON.parse(a.result);Object.keys(l).forEach(o=>{i(o)||localStorage.setItem(o,l[o])}),s()}catch{alert("Invalid JSON")}},a.readAsText(n)},s()})();
